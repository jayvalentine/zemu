#include "emulation/CPU/Z80.h"

#ifndef ZEMU_IO_SERIAL_BUFFER_SIZE
#define ZEMU_IO_SERIAL_BUFFER_SIZE 256
#endif

typedef struct {
    zuint8 buffer[ZEMU_IO_SERIAL_BUFFER_SIZE];
    unsigned int head;
    unsigned int tail;
} SerialBuffer;

void zemu_io_serial_master_puts(zuint8 val);
zuint8 zemu_io_serial_master_gets(void);
zusize zemu_io_serial_buffer_size(void);

zuint8 zemu_io_in(void * context, zuint16 port);
void zemu_io_out(void * context, zuint16 port, zuint8 value);
